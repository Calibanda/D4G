var express=require("express"),bodyParser=require("body-parser");const{response:response}=require("express");var path=require("path"),app=express(),cors=require("cors");app.use(cors({origin:"*"}));const MongoClient=require("mongodb").MongoClient,uri="mongodb+srv://AINADMIN:AINADMIN@icv-in-practice.fer4c.mongodb.net/accesInterfacesNumeriques?retryWrites=true&w=majority",client=new MongoClient(uri,{useNewUrlParser:!0,useUnifiedTopology:!0});client.connect(function(e){e?console.log("Didn't achieve connection..."):console.log("Connected successfully !"),app.post("/api/search/:zipcode",(e,r)=>{var s={"Code postal":e.params.zipcode};client.db("accesInterfacesNumeriques").collection("donneesCommunes").find(s).toArray(function(e,s){if(e)throw e;return r.status(200).send(s)})})}),app.use(bodyParser.urlencoded({extended:!1})),app.use(bodyParser.json()),app.use(express.static(path.join(__dirname,"view"))),app.get("/",function(e,r){r.sendFile(__dirname+"/view/index.html")});var server=app.listen(80,function(){var e=server.address().address,r=server.address().port;console.log("Example app listening at http://%s:%s",e,r)});